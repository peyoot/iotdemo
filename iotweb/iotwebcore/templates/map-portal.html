{% extends 'base_logged_in_sidebar_t.html' %}

{% load static %}

{% block toptitle %} <h5>Welcome to Digi AWS IOT Demo Platform </h5> {% endblock %}

{% block sidebar_content %}
            <div class="d-flex p-3 text-white">
            Solar Farms   
            </div>
            <div id="farms-list" >
            </div>
{% endblock %}
{% block page_content %}

  <!-- Create a container for the map. -->
  <div id='map' width="100%" style='height:600px'></div>
  <script>         
    
    mapboxgl.accessToken = '{{ mapbox_access_token }}' ;

     
//    document.write((Math.random()*(15-10) + 10).toFixed(2))

 //  document.write(mapboxgl.accessToken)
    </script>

 <!-- Local JS files and functions -->
        <!-- Local JS files and functions -->
    
        here's site config mapbox token from TemplateResponse:
        {{ mapbox_access_token }}
   


{% endblock %}


{% block javascript %}
    <!-- Local JS files and functions -->
    <script type="text/javascript" src="{% static 'js/portal-map.js' %}"></script>
    <script>
    // Ready method.
    // Initialize the map.
    initMap();
    $(document).ready(function() {
        // Hide the sidebar collapsator.
        $("#collapsator").hide();

        // Get smart farms and place them in the map.
        $.post(
            "{% url 'get_solar_farms' %}",
            getSolarFarmsCallback
        );

  
    });
    </script>
{% endblock %}

